FROM python:3.12.7-bookworm

WORKDIR /src

ENV PYTHONDONTWRITEBYTECODE 1
ENV PYTHONUNBUFFERED 1

COPY ./poetry.lock /src/poetry.lock
COPY ./pyproject.toml /src/pyproject.toml

RUN /bin/bash -c "pip install poetry"
RUN /bin/bash -c "poetry install"

COPY . /src/
COPY entrypoint.sh /src/entrypoint.sh

RUN chmod a+x entrypoint.sh
